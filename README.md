# Эмулятор калькулятора С3-15

Это эмулятор советского инженерного калькулятора С3-15, полностью воспроизводящий функциональность оригинального устройства.

## Особенности версии 0.4

- Добавлен парсер выражений для более точного вычисления математических операций
- Добавлены все математические операции, соответствующие оригинальному калькулятору
- Реализована система логирования операций и ошибок
- Улучшена логика работы с памятью (ЗП, ВП)
- Добавлена поддержка тригонометрических функций (sin, cos, tg, arctg)
- Добавлена поддержка логарифмических функций (ln, lg)
- Добавлена поддержка степенных функций (xʸ, eˣ)
- Добавлена поддержка корней (√x, √(x²+y²))
- Улучшена обработка ошибок и переполнений
- Добавлены тесты для проверки функциональности

## Установка и запуск

1. Клонировать репозиторий:
```
git clone https://github.com/yourusername/Emulator-S3-15.git
cd Emulator-S3-15
```

2. Установить зависимости:
```
npm install
```

3. Открыть файл `index.html` в браузере или запустить с помощью локального сервера.

## Быстрый запуск

### Для разработчиков

1. **Установка зависимостей** (если еще не установлены):
```
npm install
```

2. **Запуск локального сервера**:
```
npm start
```
Это автоматически запустит http-server и откроет сайт в вашем браузере по умолчанию.

### Для обычных пользователей

- Просто откройте файл `index.html` в вашем браузере двойным щелчком

### Автоматический запуск (рекомендуется)

В проект уже включены скрипты для автоматического запуска:

#### Windows
- Запустите файл `start-calculator.bat` двойным щелчком
- Это автоматически откроет калькулятор в вашем браузере по умолчанию

#### macOS/Linux
- Запустите файл `start-calculator.sh` из терминала:
```bash
chmod +x start-calculator.sh  # Только при первом запуске
./start-calculator.sh
```
- Это автоматически откроет калькулятор в вашем браузере по умолчанию

### Создание ярлыка для быстрого запуска

#### Windows

1. **Создание BAT-файла**:
   - Создайте новый текстовый файл с именем `start-calculator.bat`
   - Добавьте следующий код:
   ```bat
   @echo off
   cd /d "ПУТЬ_К_ПРОЕКТУ\Electronika-S3-15"
   start "" "http://localhost:8080"
   npm start
   ```
   - Сохраните файл и поместите его на рабочий стол

2. **Создание ярлыка**:
   - Щелкните правой кнопкой мыши на рабочем столе
   - Выберите "Создать" > "Ярлык"
   - В поле "Расположение объекта" введите:
   ```
   cmd.exe /c "ПУТЬ_К_ПРОЕКТУ\Electronika-S3-15\start-calculator.bat"
   ```
   - Назовите ярлык "Калькулятор С3-15"

#### macOS/Linux

1. **Создание shell-скрипта**:
   - Создайте новый файл с именем `start-calculator.sh`
   - Добавьте следующий код:
   ```bash
   #!/bin/bash
   cd /path/to/Electronika-S3-15
   open http://localhost:8080
   npm start
   ```
    - Сделайте файл исполняемым:
    ```bash
    chmod +x start-calculator.sh
    ```

### Решение проблем

1. **Если сайт не открывается автоматически**:
   - Откройте браузер и перейдите по адресу: `http://localhost:8080`

2. **Если порт 8080 занят**:
   - Измените порт в команде запуска:
   ```bash
   npx http-server -p 8081 -o
   ```

### Дополнительные возможности

1. **Создание ярлыка в браузере**:
   - Откройте сайт через `npm start`
   - В Chrome: нажмите на три точки > Дополнительные инструменты > Создать ярлык
   - В Firefox: нажмите на три полоски > Закладки > Добавить страницу в закладки

2. **Добавление на домашний экран мобильного устройства**:
   - Откройте сайт на мобильном устройстве
   - В Safari (iOS): нажмите на значок "Поделиться" > "На экран «Домой»"
   - В Chrome (Android): нажмите на три точки > "Добавить на главный экран"

3. **Быстрый доступ к инструкции**:
   - Откройте файл `instruction.html` для получения подробной инструкции по использованию калькулятора

4. **Работа в офлайн-режиме**:
   - Калькулятор полностью работает без интернета после первой загрузки

## Структура проекта

```
/
├── index.html                     # Основной файл с интерфейсом калькулятора
├── instruction.html               # Инструкция по использованию
├── JavaScript/                    # Директория с JavaScript-файлами
│   ├── buttons.js                 # Логика работы кнопок калькулятора
│   ├── logic.js                   # Общая логика приложения
│   ├── calculator.js              # Основные вычислительные функции 
│   ├── logger.js                  # Система логирования
│   ├── parser.js                  # Парсер математических выражений
│   └── tests/                     # Тесты для проверки функциональности
├── src/                           # Исходные файлы для UI
│   ├── styles/                    # CSS-стили
│   ├── img/                       # Изображения
│   └── fonts/                     # Шрифты
├── logs/                          # Директория для хранения логов
├── package.json                   # Зависимости проекта
└── README.md                      # Описание проекта
```

## Использование

Калькулятор поддерживает все функции оригинального С3-15:

- Базовые операции: +, -, *, /
- Тригонометрические функции: sin, cos, tg, arctg
- Логарифмические функции: ln, lg
- Степенные функции: xʸ, eˣ
- Корни: √x, √(x²+y²)
- Работа с памятью (ЗП, ВП)
- Поддержка научной нотации

## Парсер выражений

Парсер выражений позволяет более точно вычислять математические выражения, соответствующие формату ввода на оригинальном калькуляторе С3-15. Он поддерживает:

- Преобразование строки выражения в токены
- Вычисление результата с использованием библиотеки mathjs
- Проверку результата с допустимой погрешностью
- Поддержку всех специальных операций калькулятора

## Логирование

Система логирования записывает все операции, ошибки и состояния калькулятора. Логи хранятся в localStorage браузера и доступны для просмотра через консоль разработчика.

## Тестирование

Для запуска тестов используйте:

```
npm test
```

Для запуска тестов парсера:

```
npm test -- --testPathPattern=JavaScript/tests/parser.test.js
```

## Лицензия

Проект распространяется под лицензией MIT.

## Авторы

ОАО «Макеевский Эмуляторный Завод» 